---
output: 
  html_document:
    toc: true
    toc_float: true
    theme: default
    css: style.css
    number_sections: true
---

```{r echo = FALSE}
suppressPackageStartupMessages(library(googleVis))
suppressPackageStartupMessages(library(DT))
suppressPackageStartupMessages(library(plotly))
suppressPackageStartupMessages(library(reshape2))
op <- options(gvis.plot.tag='chart')
knitr::opts_chunk$set(echo=FALSE, 
                      warning=FALSE, 
                      message=FALSE, 
                      results = 'asis', 
                      fig.align = "center",
                      dev="png",
                      dev.args=list(type="cairo"),
                      dpi = 96)
```

<script>
$(window).scroll(function(e){ 
  var $el = $('#TOC'); 
  var isPositionFixed = ($el.css('position') == 'fixed');
  if ($(this).scrollTop() > 422 && !isPositionFixed){ 
    $('#TOC').css({'position': 'fixed', 'top': '0px', 'display': 'inline'}); 
  }
  if ($(this).scrollTop() < 422 && isPositionFixed){
    $('#TOC').css({'display': 'none', 'position': 'static'}); 
  } 
});
</script>


<img src="CQAB_large.png" width="100%" align="center" style="margin: 0px 20px"/>

#Introduction

#Forward

#Course Quality Advisory Board

#Overview of Survey and Report

#Overview of EMJMD Programs
- Brief statement of what EMJD programs are and which ones were analyzed in the survey (list them and/or map them?)

```{r programs, results = "asis", echo = FALSE}
DT::datatable(tenormore, rownames = FALSE)

```


- Which universities were involved and geographical location (perhaps add a map localizing all the universities?)

##Nationalities
```{r nationalities, results='asis', tidy=FALSE, echo = FALSE}
overalldf <- overall %>%
  select(A.7.What.is.nationality.please.choose.one.only._Response) %>%
  group_by(A.7.What.is.nationality.please.choose.one.only._Response) %>%
  summarise(respondents = n())
names(overalldf) <- c("Country", "respondents")
overalldf <- overalldf[complete.cases(overalldf$Country),]

Geo <- gvisGeoChart(overalldf, colorvar = "respondents", locationvar = "Country", 
                    options = list(colors = "['#F6F3EC','#004E86']"))
plot(Geo)
```

##Gender
```{r gender, results = "asis", tidy=FALSE, echo = FALSE, warning=FALSE}
gender <- as.character(overall$A.9.Gender._Response)
gender[is.na(gender)] <- "No response"
gender <- as.data.frame(summary(as.factor(gender)))
names(gender) <- c("Number")
DT::datatable(gender,options = list(dom = 't', searching = FALSE,
                                                    columnDefs = list(list(width = "190px", targets = "_all")),
                                                    align = "center"
                                                    ))

```

##Age
```{r age, echo = FALSE}
Age <- as.data.frame(overall$A.8.Age._Response)
names(Age) <- "Age"
ggplotly(ggplot(Age, aes(x = Age)) + geom_histogram(fill = background_color, colour = "black", binwidth = 1) + 
           xlab("Age") + ylab("count") + 
           theme(panel.background = element_rect(fill = background_text)))

```

##Disability
```{r disability, results = "asis", echo = FALSE}
disability <- as.data.frame(summary(overall$A.12.Do.you.have.any.diagnosed.disability._Response))
names(disability) <- c("Number")
DT::datatable(disability,options = list(dom = 't', searching = FALSE,
                                                    columnDefs = list(list(width = "190px", targets = "_all")),
                                                    align = "center",
                                       order = list(list(1, 'desc'))
                                                    ))

```

##Year when students began their studies
```{r year, results = "asis", echo = FALSE}
year <- as.data.frame(summary(as.factor(overall$A.5.When.did.you.start.EM.Course._Response)))
names(year) <- c("Number")
DT::datatable(year,options = list(searching = FALSE,
                                  columnDefs = list(list(width = "190px", targets = "_all")),
                                  align = "center",
                                  order = list(list(1, 'desc')),
                                  pageLength = 11
                                  ))

```

##Scholarship
```{r scholarship, results = "asis", echo = FALSE}
scholarship <- as.data.frame(summary(as.factor(overall$A.10.Have.you.been.awarded.an.Erasmus.Mundus.scholarship.for.master.studies._Response)))
names(scholarship) <- c("Number")
DT::datatable(scholarship, options = list(dom = 't', searching = FALSE,
                                                    columnDefs = list(list(width = "190px", targets = "_all")),
                                                    align = "center"
                                                    ))

```



#Supporting services

##Support received before the start of the programs

In 6.1 we've asked respondents to rate their satisfaction with the information and support that they received before the start of EMJMD. Median values for all of the dimensions in this section lie above 3 on our scale which is equivalent to "Somewhat satisfied". This means that 50% of programs on all of the dimensions received relatively high satisfaction responses.

At the same time there is an unevenness in just how coordinated those answers were. For dimensions "Standards of behaviour" and "Enrolling in classes" and "Course content" almost every mean lies above "Somewhat satisfied" (the left-right side of the box is indicating 25th quartile).
This might mean that for those aspects of students' experience approaches used by courses tend to be quite similar in their results, while relatively widespread differences in ratings on dimensions "Information about fieldwork", "Timetable" and "Evaluation methods" indicate that there is still room for improvement and best practices sharing among programs to be done.

```{r supp_before, fig.width=8.5}
z <- gsub("2004|2005|2006|2007|2008|2009|2010|2011", "Alumni", overall$A.5.When.did.you.start.EM.Course._Response)
levels <-c("Alumni", "2012", "2013", "2014") 
z <- factor(z, levels = levels)
means_printing_plotly("B.1.1")

```

This graph shows distribution of answers to the same question, but with division per year of enrolment (when students began their studies). The most noticeable trend that is present in almost all of the dimensions is that students tend to rate their experience less favourable the less they've studied in any particular EMJMD. The only dimension where this is not the case is dimension "Standards of behaviour" where every cohort of students seem to be content with how much information and support they've received about that particular aspect.

The aforementioned trend is especially pronounced in three dimensions: "Evaluation methods" (difference between 2014 and alumni cohort in shares of negative feedback is 15%). "Timetable" (difference is 16%) and "Course content" (11%). For dimension "Enrolling in classes" this difference is rather small (6%). At the same time it should be mentioned that dimension "Information about fieldwork" received universally low ratings regardless of the cohort. This is also the only dimension where share of especially negative feedback ("Very unsatisfied") is remarkably stable over the years.

```{r supp_before_group, fig.height=8}
questionprint_grouping("B.1.1", overall, grouping = z, grouping_levels = levels)

```

All of this let's us make couple of speculative claims that might influence the students' satisfaction to a positive degree.
First of all, there is almost never enough information that can be given to students when they begin their studies. Students who just finished their first year of studies are almost without a fail the least satisfied on every dimension. Perhaps, the way information about standards of behaviour and enrolling in classes is shared should be a model for better information provision since students seem to have relatively few problems with those dimensions.

Second of all, EMJMDs can be a valuable source of information about different best practices they have that are very likely to have positive impact on students' experiences.

Finally, there is a very interesting trend of students having less and less negative outlook of their studies the more time they've spent inside of the program. Students who finished their first year of studies are on average less satisfied than second-year students who in turn are less satisfied than alumnis. There are many possible explanations for that peculiarity, but the most likely explanation in that particular case is that students were asked about their experiences before the start of the program. That means that first-year students are the ones that might remember issues they might've encountered in that process more sharply.

##Support received during orientation program

In section 6.2, students and alumni were asked to rate their satisfaction about the introduction process to the particular units or people as part of the orientation program. All dimensions in this section received relatively high satisfaction responses by looking its median values which lie above 3.0 on our scale. Then, the means of the answers of most dimensions lies above "Somewhat satisfied" category except "Buddy or tutor system", "Student associations" and "International student office". Action for improvement and best practices sharing among programs could be done within these three categories due to the wide range of its mean value. Moreover, the existence of mild and extreme outliers in all categories which place between "Very unsatisfied" and "Somewhat unsatisfied" should be an attention for particular improvement in several programs.

```{r orientation, fig.width=8.5}
means_printing_plotly("B.1.3")
```

The distribution of answers is also showed by year division of study which represents the year when the respondents began their study. There not are noticeable trend presents in all dimensions as the favorability of each dimension is quite similar. However, comparing all dimension, the least favorable responses present in "Buddy or tutor system" and "Student associations" which received negative feedbacks above 20% from every cohort of students. The other dimensions received less than 20% negative responses from all cohort of students except "International student office" which received 21% negative responses from 2014 students. Then, "International student office" also presents a remarkable negative feedback of "Very unsatisfied" which is relatively stable from all cohort students.

```{r orientation_group, fig.height=10}
questionprint_grouping("B.1.3", overall, grouping = z, grouping_levels = levels)
```


High negative responses of two dimensions ("Buddy or tutor system" and "Student associations") could happen due to four speculative reasons. First, most of EMJD has duration 4-6 months in each universities during the program so that the students have inadequate time to merged with local students who have spent 2-4 years in the same university. Second, most of students of EMMJD come from different countries and cultures which could be a problem in adapting new environment and traditions in such a short period. Third, high mobility of EMMJD students makes the availability of buddy or tutor from older year of program are quite impossible to find. Fourth, different curriculum and teaching material between EMMJD and local program might be a reason why "Buddy or tutor system" received high negative responses.

##Helpfulness of units and people

This section shows the respondents’ assessment of the helpfulness of different units and people involved in their master courses.  Similarly to the previous two sections, the responses show relatively high satisfaction – median values for all the dimensions are above 3, which is equivalent to "Somewhat satisfied" option in the survey. 

However, the responses are not fully coordinated, which is, again, similar to the two previous sections. In this section, "Buddy or tutor system" and "Student associations" are notable in the sense that they are the only dimensions here in which not all of the means fall above "Somewhat satisfied", meaning that there were significant percentages of respondents who were unsatisfied with these units. The median values for these two dimensions are also noticeably lower than for the other six dimensions, which indicates that the organizing institutions should pay additional attention to the improvement of these components of their courses. 


```{r helpfulness, fig.width=8.5}
means_printing_plotly("B.2.1")
```
When the responses are distributed according to the respondents’ year of enrolment, in the second graph, there are no special trends to be identified. The only exceptions are two dimensions – "Academic staff" and "Administrative staff", where the trend similar to the previous two sections is noticeable. In these two dimensions, the least satisfied students are the ones in the first year of their master course, while the alumni are least unsatisfied. However, the differences between the different cohorts are not great – for both dimensions, there are 5% more of unsatisfied first year students than alumni. 


```{r helpfulness_group, fig.height=10}
questionprint_grouping("B.2.1", overall, grouping = z, grouping_levels = levels)
```

While the smaller dissatisfaction rates among the alumni could be explained by the passage of time, which perhaps allowed them to put the helpfulness of "Academic staff" and "Administrative staff" into a new, more forgiving perspective, it seems that the lack of helpfulness from "Buddy or tutor system" and "Student associations" left a more lasting impression on the respondents. It is interesting to note that the percentages of respondents unsatisfied with the helpfulness of "Other students" are quite lower than the percentages of those unsatisfied with the two previously mentioned dimensions, which could mean that they had less access to the more formalized structures of student organizing, had less information about them, or simply found that these structures did not fit or represent their needs adequately. The results of our survey, however, allow us only to speculate on the reasons for these differences. 


##Support received on various issues

In this section, the respondents were asked to rate the supported the received in relation to "Financial issues", "Health insurance", and "Inappropriate conduct or sexual harassment issues". Even though the median values for all three dimensions fall above 3.2, which is here equivalent to "Somewhat satisfied", the distribution of means is varied. For "Inappropriate conduct or sexual harassment issues", the median value is actually 3.6, and all the means cover a fairly small range, all falling within the 3th and 4th quartile. The means of the other two dimensions cover a much broader range, which means that the respondents’ satisfaction with these forms of support is much more varied and there are larger percentages of those who are unsatisfied. 

```{r support_on, fig.width=8.5}
means_printing_plotly("B.2.2")
```

In the distribution of the responses according to the respondents’ year of enrolment, only "Financial issues" show a trend. It is the same trend already identified in some of the previous sections, namely that the percentage of unsatisfied students falls with time. In this case, the 2012 cohort and the alumni show the same rate of satisfaction, smaller than among the 1st-year and 2nd-year students, which could be interpreted as due to the smaller relevance of "Financial issues" once the master course is completed. 

```{r support_on_group}
questionprint_grouping("B.2.2", overall, grouping = z, grouping_levels = levels)

```

Although the means for the "Inappropriate conduct or sexual harassment issues" dimension would indicate high satisfaction rates, the second graph shows that three out of four cohorts – 2014, 2012, and alumni – have significant percentages of respondents (11%) who are unsatisfied with the support received. For an issue like this one, these are high percentages, which should be taken into serious consideration and addressed by the participating institutions. 

#Assessment and Feedback

##Module assessment
```{r module_asses, fig.height=8, fig.width=8.5}
means_printing_plotly("C.1")
```
```{r module_asses_group, fig.height=12}
questionprint_grouping("C.1", overall, grouping = z, grouping_levels = levels)

```

#Teaching/Learning and Supervision

##Teaching/Learning across different universities

##First supervisor
```{r first_sup, fig.height=4, fig.width=8.5}
means_printing_plotly("L.4")
```
```{r first_sup_group, fig.height=4}
questionprint_grouping("L.4", overall, grouping = z, grouping_levels = levels)
```


##Second supervisor
```{r second_sup, fig.height=4, fig.width=8.5}
means_printing_plotly("L.5")
```
```{r second_sup_group, fig.height=4}
questionprint_grouping("L.5", overall, grouping = z, grouping_levels = levels)

```


#Internship/Field Experience and Personal Development

##Personal development
```{r development, fig.height=8, fig.width=8.5}
means_printing_plotly("L.6")
```
```{r development_group, fig.height=10}
questionprint_grouping("L.6", overall, grouping = z, grouping_levels = levels)

```

##Internship experience
```{r internship, fig.width=8.5}
means_printing_plotly("L.2.a")
```
```{r internship_group, fig.height=10}
questionprint_grouping("L.2.a", overall, grouping = z, grouping_levels = levels)

```

#Questions about EMA

##Are you aware of existence of EMA?
```{r existence}
existence <- as.character(dataset$J.1.Please.answer._Are.you.aware.of.the.existence.of.the.Erasmus.Mundus.Students.and.Alumni.Association.)
existence[is.na(existence)] <- "N/A"
existence <- as.data.frame(summary(as.factor(existence)))
names(existence) <- "Number"
DT::datatable(existence, options = list(dom = 't', searching = FALSE,
                                                    columnDefs = list(list(width = "190px", targets = "_all")),
                                                    align = "center",
                                       order = list(list(1, 'desc'))
                                                    ))
```

##Are you aware that each program can elect EMA Program Representative
```{r election}
election <- as.character(dataset$X.153_Are.you.aware.that.each.programme.can.elect.an.EMA.Programme.Representative.)
election[is.na(election)] <- "N/A"
election <- as.data.frame(summary(as.factor(election)))
names(election) <- "Number"
DT::datatable(election, options = list(dom = 't', searching = FALSE,
                                       columnDefs = list(list(width = "190px", targets = "_all")),
                                       align = "center",
                                       order = list(list(1, 'desc'))
                                      ))

```


#Additional Remarks

#Conclusion/Discussion